<div ng-include="'views/header.html'" ng-init="menu='home'"></div>

<div class="progress progress-striped active" ng-show="loading">
  <div class="progress-bar" role="progressbar" aria-valuenow="{{ pb.progress }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ pb.progress }}%">
    <span class="sr-only">{{ pb.progress }}% Complete</span>
  </div>
</div>
<div class="panel panel-default"  ng-show="!loading">
	<div class="panel-heading">
		<h3>Installation S/N {{ deviceId }}</h3>
		<select ng-model="period" ng-change="updatePeriod()">
			<option value="yesterday">Yesterday</option>
			<option value="7lastdays">7 last days</option>
			<option value="30lastdays">30 last days</option>
		</select>
	</div>
	<div>
		<table class="table table-bordered">
			<thead>
				<th>Period<br/><b>{{ startPeriod | date:'yyyy-MM-dd' }} - {{ endPeriod | date:'yyyy-MM-dd' }}</b> </th>
				<th>Total production<br/><b>{{ sumMeasures | number:2 }} kWh</b></th>
			</thead>
		</table>		
	</div>
	<highchart id="prodChart" config="chartConfig"></highchart>
    <br>
	<div class="table-responsive">
		<table class="table table-striped table-hover">
			<thead>
				<th>Date</th>
				<th>Value (Wh)</th>
			</thead>
			<tr ng-repeat="report in reports">
				<td>{{ report.measureDate | date: dateFormat }}</td>
				<td>{{ report.measure }}</td>
			</tr>
		</table>
	</div>
</div>

<a role="button" class="btn btn-primary btn-lg btn-block" href="javascript:void();" ng-href="#/installs">Back</a>
<br>
<div ng-include="'./views/footer.html'"></div>